pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
x = 64
y = 64

z = 1

time_t = 0

cellwidth = 8

p1 = {
    x = 6 * cellwidth,
    y = 7 * cellwidth,
    hasbat = false,
    damage = 0,
    health = 10,
    sprindex = 9,
    width = 2,
    height = 2,
    speed = 1
}

dog = {
    x = 2 * cellwidth,
    y = 7 * cellwidth,
    health = 1000,
    sprindex = 7,
    width = 2,
    height = 2,
    speed = 0
}


function dealdamage(dam)

end


function wait() 
	p1.sprindex = 9
	p1.width = 2
	a = 0
end

function p1:moveleft()
 if p1:nothingleft() then
  self.x = self.x - p1.speed
 end
end

function p1:moveright()
 if p1:nothingright() then
  self.x = self.x + p1.speed
 end
end

function p1:moveup()
 if p1:nothingabove() then
  self.y = self.y - p1.speed
 end
end

function p1:movedown()
 if p1:nothingbelow() then
  self.y = self.y + p1.speed
 end
end

function p1:nothingleft()
 if self.x % 8 != 0 then
  return true
 else
  sprindexheadlevel = mget((self.x / 8) - 1, self.y / 8)
   oneortwoblocksbelow = 1
  if self.y %8 != 0 then -- if the upperbody is not completely on one and onely one cell
   oneortwoblocksbelow = 2 -- go one cell lower to account for a partially filled cell
  end
  sprindexfeetlevel = mget((self.x / 8) - 1, (self.y / 8) + oneortwoblocksbelow)
  clearheadlevel = not fget(sprindexheadlevel, 0) -- head and feet occupy two different cells
  clearfeetlevel = not fget(sprindexfeetlevel, 0) -- check for both
  return clearheadlevel and clearfeetlevel
 end
end

function p1:nothingright()
 if self.x % 8 != 0 then
  return true
 else
  sprindexheadlevel = mget((self.x / 8) + 1, self.y / 8)
  oneortwoblocksbelow = 1
  if self.y %8 != 0 then -- if the upperbody is not completely on one and onely one cell
   oneortwoblocksbelow = 2 -- go one cell lower to account for a partially filled cell
  end
  sprindexfeetlevel = mget((self.x / 8) + 1, (self.y / 8) + oneortwoblocksbelow)
  clearheadlevel = not fget(sprindexheadlevel, 0) -- head and feet occupy two different cells
  clearfeetlevel = not fget(sprindexfeetlevel, 0) -- check for both
  return clearheadlevel and clearfeetlevel
 end
end

function p1:nothingabove()
 if self.y % 8 != 0 then
  return true
 else
  sprindex = mget(self.x / 8, (self.y / 8) - 1)
  return not fget(sprindex, 0)
 end
end

function p1:nothingbelow()
 if self.y % 8 != 0 then
  return true
 else
  sprindex = mget(self.x / 8, (self.y / 8) + 2)
  return not fget(sprindex, 0)
 end
end

function _update()
	wait()
 if (btn(0)) then p1:moveleft() end
 if (btn(1)) then p1:moveright() end
 if (btn(2)) then p1:moveup() end
 if (btn(3)) then p1:movedown() end
 if (btn(4)) then 
 	p1.sprindex = 5
 	p1.width = 2
 end
end



function _draw()
 map(0,0,0,0,16,16)
-- map(0,0,0,64,16,8)
 spr(p1.sprindex, p1.x, p1.y, p1.width, p1.height)
 spr(dog.sprindex, dog.x, dog.y, dog.width, dog.height)
 
end














__gfx__
000000004444444400500000000000004444444400000000000000000000999009990000000000eeee0000000000000000000000000000000000000000000000
0000000044444444058555555eeee00044444444000000000000000000009e9009e9000000000eeeeee000000000000000000000000000000000000000000000
007007000f0ff0f0555555555000ee000f0ff0f00000000000000000000000999900000000000eeeeee000000000000000000000000000000000000000000000
000770000ffffff00005555500000ee0affffff000000000000000000000009c9c00000000000efcfc0000000000000000000000000000000000000000000000
00077000000ff0000005000500000000a00ff00000000000000000000000099999900000000000ffff0000000000000000000000000000000000000000000000
00700700003333000000000000000000a0333300000000000000000000000999599000000000000ff00000000000000000000000000000000000000000000000
00000000033333300000000000000000a03333000000000000000000000000099000000000000226622000000000000000000000000000000000000000000000
00000000300330030000000000000000a03333000000000000000000009900099000000000000226622000000000000000000000000000000000000000000000
00000000300330030000000000000000a03330000000000000000000000900999900000000000226622000000000000000000000000000000000000000000000
00000000000550000000000000000000f33330000000005555000000000999999900000000000222622000000000000000000000000000000000000000000000
00000000000110000000000000000000000550000000055555500000000099999900000000000f2222f000000000000000000000000000000000000000000000
00000000000110000000000000000000000110000000085558500000000099999900000000000022220000000000000000000000000000000000000000000000
00000000000110000000000000000000000110000055558585555500000090900900000000000022220000000000000000000000000000000000000000000000
00000000000000000000000000000000000110000550055555500550000090900900000000000022220000000000000000000000000000000000000000000000
00000000000000000000000000000000000000005500550000550055000000000000000000000022220000000000000000000000000000000000000000000000
000000000000000000000000000000000000000050005000000500050000000000000000000000ff0ff000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444445555555544444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000001010000000000000000000000000000010100000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3131313131313131313131313131313100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3132323232323232323232323232323100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3131313131313131313131313131313100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3434343434343434343434343434343434000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0034343434000000000000000000000034000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
