pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
x = 64
y = 64

z = 1

cellwidth = 8

p1 = {
    x = 6 * cellwidth,
    y = 7 * cellwidth,
    sprindex = 4,
    width = 1,
    height = 2,
    speed = 1
}

function p1:moveleft()
 if p1:nothingleft() then
  self.x = self.x - p1.speed
 end
end

function p1:moveright()
 if p1:nothingright() then
  self.x = self.x + p1.speed
 end
end

function p1:moveup()
 if p1:nothingabove() then
  self.y = self.y - p1.speed
 end
end

function p1:movedown()
 if p1:nothingbelow() then
  self.y = self.y + p1.speed
 end
end

function p1:nothingleft()
 if self.x % 8 != 0 then
  return true
 else
  sprindex = mget((self.x / 8) - 1, self.y / 8)
  return not fget(sprindex, 0)
 end
end

function p1:nothingright()
 if self.x % 8 != 0 then
  return true
 else
  sprindex = mget((self.x / 8) + 1, self.y / 8)
  return not fget(sprindex, 0)
 end
end

function p1:nothingabove()
 if self.y % 8 != 0 then
  return true
 else
  sprindex = mget(self.x / 8, (self.y / 8) - 1)
  return not fget(sprindex, 0)
 end
end

function p1:nothingbelow()
 if self.y % 8 != 0 then
  return true
 else
  sprindex = mget(self.x / 8, (self.y / 8) + 2)
  return not fget(sprindex, 0)
 end
end

function _update()
 if (btn(0)) then p1:moveleft() end
 if (btn(1)) then p1:moveright() end
 if (btn(2)) then p1:moveup() end
 if (btn(3)) then p1:movedown() end
 if (btn(4)) then z += 1 end
end



function _draw()
 map(0,0,0,0,16,8)
 map(0,0,0,64,16,8)
 spr(p1.sprindex, p1.x, p1.y, p1.width, p1.height)
end














__gfx__
00000000444444440050000000000000444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000044444444058555555eeeee00444444440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000f0ff0f055555555500000000f0ff0f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000ffffff00005555500000000affffff00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000ff0000005000500000000a00ff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700003333000000000000000000a03333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000033333300000000000000000a03333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000300330030000000000000000a03333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000300330030000000000000000a03330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000550000000000000000000f33330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000110000000000000000000000550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000110000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000110000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
444444444444444444444444eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000044444000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333033333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333033333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3131313131313131313233333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3333333333333333333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
